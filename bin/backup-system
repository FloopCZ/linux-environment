#!/bin/bash
dst=${1:-/backup.tar.xz}

# A simple script to backup the whole system using tar.

tar --exclude="${dst}" \
    --exclude={"/dev/*","/proc/*","/sys/*","/swapfile","/tmp/*"} \
    --exclude={"/run/*","/mnt/*","/media/*","/lost+found"} \
    --exclude={"/bin/*","/lib*/*","/opt/*","/sbin/*"} \
    --exclude={"/usr/bin/*","/usr/lib*/*","/usr/share/*","/usr/include/*","/usr/src/*"} \
    --exclude={"/var/log/*","/var/lib/docker/*","/var/cache/*"} \
    --exclude="*~*" \
    --exclude={"/home/*/.cache/*","/home/*/.local/*","/home/*/.config/*/Cache*/*"} \
    --exclude={"*/.Trash/*","*/.Trash-*"} \
    --exclude={"/home/*/Downloads/*","/home/*/.wine/*"} \
    --xattrs --acls \
    -cvpf "${dst}" \
    /*
